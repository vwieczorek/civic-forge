<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CivicForge: Interactive Model Review</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <!-- Visualization & Content Choices:
        - Report Info: Section I (Intro) -> Goal: Orient User -> Viz/Presentation: Thematic intro text, key challenges list. Interaction: None. Justification: Sets context. Library/Method: HTML/Tailwind.
        - Report Info: Section II (Federation, Customization, Governance) -> Goal: Explain Board/Forge structure & rules -> Viz/Presentation: Text summaries, interactive HTML diagram of Forge/Board hierarchy, Ostrom's Principles (Table 1) as HTML table. Interaction: Click to expand details, hover on diagram elements. Justification: Simplifies complex relationships. Library/Method: HTML/Tailwind, JS for diagram interactivity.
        - Report Info: Section III (Incentives) -> Goal: Explain Experience points & rewards -> Viz/Presentation: Text summaries, formula for Reward_q as styled text. Interaction: Tooltips for formula components. Justification: Clarifies economic model. Library/Method: HTML/Tailwind, JS for tooltips.
        - Report Info: Section IV (Quest Lifecycle & Impact) -> Goal: Explain task flow & impact measurement -> Viz/Presentation: Interactive HTML/Canvas diagram of Quest states (S0-S12), text on CCII. Interaction: Click on Quest states for descriptions. Justification: Visualizes process. Library/Method: HTML/Tailwind, JS/Canvas for diagram.
        - Report Info: Section V (Trust & Values) -> Goal: Explain trust mechanisms -> Viz/Presentation: Text on reputation (Rep_U vector as visual), dispute resolution flow diagram. Interaction: Expandable sections. Justification: Highlights value integration. Library/Method: HTML/Tailwind, JS for diagram.
        - Report Info: Section VI (Preventing Negative Emergence) -> Goal: Show risk mitigation -> Viz/Presentation: Failure Modes (Table 2) as interactive HTML table. Interaction: Click rows for detail. Justification: Organizes complex risks. Library/Method: HTML/Tailwind, JS.
        - Report Info: Section VII (Frameworks) -> Goal: Summarize modeling approaches -> Viz/Presentation: Framework Suitability (Table 3) as interactive HTML table. Interaction: Click rows for detail. Justification: Compares technical options. Library/Method: HTML/Tailwind, JS.
        - Report Info: Mathematical Notations (e.g., U_global, incentive_t) -> Goal: Clarify terms -> Viz/Presentation: Styled text, possibly within tooltips or a glossary section. Interaction: Hover/Click. Justification: Aids understanding of specialized terms. Library/Method: HTML/Tailwind, JS.
        - CONFIRMING NO SVG/Mermaid. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        
        .nav-link.active { background-color: #d97706; color: white; }
        .dark .nav-link.active { background-color: #f59e0b; color: #1f2937; }

        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion-button.open + .accordion-content { max-height: 2000px; }
        
        .tooltip { position: relative; display: inline-block; cursor: pointer; }
        .tooltip .tooltiptext { visibility: hidden; width: 200px; background-color: #555; color: #fff; text-align: center; border-radius: 6px; padding: 5px 0; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -100px; opacity: 0; transition: opacity 0.3s; font-size: 0.875rem; }
        .dark .tooltip .tooltiptext { background-color: #333; color: #eee; }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
        
        .math-var { font-style: italic; color: #059669; } /* emerald-700 */
        .dark .math-var { color: #34d399; } /* emerald-400 */
        
        .diagram-box { border: 1px solid #d4d4d8; padding: 8px; margin: 4px; text-align: center; border-radius: 4px; background-color: #f5f5f4; }
        .dark .diagram-box { border-color: #52525b; background-color: #3f3f46; }
        
        .table-container { overflow-x: auto; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }

        .quest-lifecycle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            padding: 1rem;
        }
        .quest-state-node {
            background-color: #fffbeb; 
            border: 2px solid #f59e0b; 
            color: #78350f; 
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .dark .quest-state-node {
            background-color: #451a03; /* amber-900 */
            border-color: #d97706; /* amber-600 */
            color: #ffedd5; /* amber-100 */
        }
        .quest-state-node:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .dark .quest-state-node:hover {
            box-shadow: 0 4px 12px rgba(255,255,255,0.1);
        }
        .quest-state-node.active-node {
            background-color: #f59e0b;
            color: white;
            font-weight: bold;
        }
        .dark .quest-state-node.active-node {
            background-color: #d97706; /* amber-600 */
            color: #fffbeb; /* amber-100 */
        }
        #questStateDescription {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f0fdf4; 
            border: 1px solid #6ee7b7; 
            border-radius: 0.5rem;
            min-height: 50px;
        }
        .dark #questStateDescription {
            background-color: #064e3b; /* emerald-800 */
            border-color: #059669; /* emerald-600 */
            color: #d1fae5; /* emerald-100 */
        }
        #theme-toggle-button {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            z-index: 50;
        }
    </style>
    <script>
        tailwind.config = {
          darkMode: 'class',
          theme: {
            extend: {
              colors: {
                amber: {
                    50: '#fffbeb',
                    100: '#fef3c7',
                    600: '#d97706',
                    700: '#b45309',
                    800: '#92400e',
                    900: '#78350f',
                  },
                emerald: {
                    50: '#ecfdf5',
                    100: '#d1fae5',
                    300: '#6ee7b7',
                    400: '#34d399',
                    600: '#059669',
                    700: '#047857',
                    800: '#065f46',
                },
                neutral: {
                    200: '#e5e5e5',
                    600: '#525252',
                    700: '#404040',
                    800: '#262626',
                    900: '#171717',
                }
              }
            }
          }
        }
      </script>
</head>
<body class="bg-amber-50 text-neutral-800 dark:bg-neutral-900 dark:text-neutral-200 transition-colors duration-300">

    <div class="flex flex-col md:flex-row min-h-screen">
        <aside class="w-full md:w-64 bg-amber-100 dark:bg-neutral-800 p-4 space-y-2 md:sticky md:top-0 md:h-screen overflow-y-auto transition-colors duration-300">
            <h1 class="text-2xl font-bold text-amber-700 dark:text-amber-400 mb-6">CivicForge Model</h1>
            <nav id="sidebarNav" class="space-y-1">
                <a href="#introduction" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Introduction</a>
                <a href="#federation-governance" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Federation & Governance</a>
                <a href="#incentives-economy" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Incentives & Economy</a>
                <a href="#quest-lifecycle-impact" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Quest Lifecycle & Impact</a>
                <a href="#trust-values" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Trust & Values</a>
                <a href="#risk-mitigation" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Risk Mitigation</a>
                <a href="#frameworks-conclusion" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Frameworks & Conclusion</a>
                <a href="#key-terms" class="nav-link block py-2 px-3 rounded hover:bg-amber-200 dark:hover:bg-neutral-700 transition-colors">Key Terms</a>
            </nav>
        </aside>

        <main class="flex-1 p-6 md:p-10 overflow-y-auto">
            <section id="introduction" class="content-section space-y-6">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Introduction to CivicForge Modeling</h2>
                <p class="text-lg leading-relaxed">The CivicForge initiative aims to build a platform that transforms community ideas into tangible, real-world actions. This interactive guide explores the conceptual mathematical model underpinning CivicForge, designed to empower communities through customizable "Boards" interconnected by a global "Forge" layer for governance and shared learning.</p>
                <div class="bg-white dark:bg-neutral-800 p-6 rounded-lg shadow transition-colors duration-300">
                    <h3 class="text-xl font-semibold text-emerald-700 dark:text-emerald-400 mb-3">Core Aspirations:</h3>
                    <ul class="list-disc list-inside space-y-1 text-neutral-700 dark:text-neutral-300">
                        <li>Create a public log for rewarded community contributions.</li>
                        <li>Enable "federation-ready" and "purposefully customizable" Boards.</li>
                        <li>Channel passive online activity into actionable impact.</li>
                        <li>Foster authentic hope and positive-sum growth.</li>
                    </ul>
                </div>
                <div class="bg-white dark:bg-neutral-800 p-6 rounded-lg shadow transition-colors duration-300">
                    <h3 class="text-xl font-semibold text-emerald-700 dark:text-emerald-400 mb-3">Fundamental Modeling Challenges:</h3>
                    <p class="text-neutral-700 dark:text-neutral-300 mb-2">Formalizing this vision into a robust and ethical mathematical model involves:</p>
                    <ul class="list-disc list-inside space-y-1 text-neutral-700 dark:text-neutral-300">
                        <li>Handling complex interactions within and between communities.</li>
                        <li>Embedding civic values (authenticity, accountability, pluralism) structurally.</li>
                        <li>Avoiding pitfalls of earlier social platforms (e.g., superficial gamification, trust erosion).</li>
                        <li>Balancing practical task orchestration with fostering genuine community engagement.</li>
                    </ul>
                    <p class="mt-3 text-neutral-700 dark:text-neutral-300">The model must transcend simple action-reward loops, incorporating structures that reflect, measure, and actively promote CivicForge's foundational values.</p>
                </div>
            </section>

            <section id="federation-governance" class="content-section space-y-6">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Federation, Customization, and Governance</h2>
                <p class="text-lg leading-relaxed">A key challenge is enabling "federation-ready" Boards that can collaborate effectively while allowing deep local customization. This section explores how the model addresses the interplay between local Board configurations (<span class="math-var">Conf<sub>Board</sub></span>) and global Forge standards (<span class="math-var">F<sub>registry</sub></span>), drawing insights from Federated Learning, commons governance, and DAO models.</p>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Architecting "Federation-Ready" Boards (<span class="math-var">X<sub>global</sub></span>)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>Cross-Board interactions (<span class="math-var">X<sub>global</sub></span>), managed by the Forge, are crucial. These interactions (<span class="math-var">type<sub>x</sub></span>) can include resource sharing, joint projects, and propagating Quest templates. Concepts from Federated Learning (FL) offer paradigms where the Forge acts as a hub aggregating learnings and patterns. Network theory can model Boards as nodes and interactions as edges. Semantic interoperability and compatible meta-level incentive/governance structures are vital for true federation.</p>
                        <h4 class="font-semibold mt-3 mb-1 text-emerald-600 dark:text-emerald-300">Forge/Board Hierarchy Diagram:</h4>
                        <div class="flex flex-col items-center p-4 border border-amber-300 dark:border-amber-700 rounded-md bg-amber-50 dark:bg-neutral-800">
                            <div class="diagram-box bg-emerald-100 dark:bg-emerald-700 border-emerald-300 dark:border-emerald-500 text-emerald-800 dark:text-emerald-100 w-1/2">The Forge (Global Governance, <span class="math-var">F<sub>registry</sub></span>, <span class="math-var">X<sub>global</sub></span> Routing)</div>
                            <div class="text-2xl my-2">↕</div>
                            <div class="flex flex-wrap justify-around w-full">
                                <div class="diagram-box bg-amber-100 dark:bg-amber-800 border-amber-400 dark:border-amber-600 text-amber-800 dark:text-amber-200 m-2 p-3">Board A (<span class="math-var">Conf<sub>Board A</sub></span>)</div>
                                <div class="diagram-box bg-amber-100 dark:bg-amber-800 border-amber-400 dark:border-amber-600 text-amber-800 dark:text-amber-200 m-2 p-3">Board B (<span class="math-var">Conf<sub>Board B</sub></span>)</div>
                                <div class="diagram-box bg-amber-100 dark:bg-amber-800 border-amber-400 dark:border-amber-600 text-amber-800 dark:text-amber-200 m-2 p-3">Board C (<span class="math-var">Conf<sub>Board C</sub></span>)</div>
                            </div>
                            <p class="mt-2 text-sm text-neutral-600 dark:text-neutral-400">Boards operate autonomously with local configurations, interacting via the Forge.</p>
                        </div>
                    </div>
                </div>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Balancing Customization (<span class="math-var">Conf<sub>Board</sub></span>) with Standards (<span class="math-var">F<sub>registry</sub></span>)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>Boards are "purposefully customizable" via <span class="math-var">Conf<sub>Board</sub></span>. The Forge offers a feature registry (<span class="math-var">F<sub>registry</sub></span>) and standards. Popular Board tweaks can "bubble up" to influence Forge standards via an RFC-like process (Request for Comments). <span class="math-var">F<sub>registry</sub></span> can be a versioned repository, and <span class="math-var">Conf<sub>Board</sub></span> specifies component versions and local rules. Voting mechanisms (e.g., Quadratic Voting) can balance influence in Forge-level decisions.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Governance Modeling: Ostrom's Principles & DAOs
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>The Board-Forge hierarchy requires careful governance. DAO models (token-based voting, transparency) and Elinor Ostrom's principles for governing common-pool resources offer insights. Boards manage local commons (attention, effort), while the Forge governs global commons (platform reputation, <span class="math-var">F<sub>registry</sub></span>).</p>
                        <h4 class="font-semibold mt-3 mb-2 text-emerald-600 dark:text-emerald-300">Ostrom's Design Principles in CivicForge (Table 1 Summary):</h4>
                        <div class="table-container">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-neutral-700">
                                <thead class="bg-amber-100 dark:bg-neutral-700">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-amber-600 dark:text-amber-300 uppercase tracking-wider">Principle</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-amber-600 dark:text-amber-300 uppercase tracking-wider">Board Application</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-amber-600 dark:text-amber-300 uppercase tracking-wider">Forge Application</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white dark:bg-neutral-800 divide-y divide-gray-200 dark:divide-neutral-600 text-sm">
                                    <tr><td class="px-4 py-2">1. Defined Boundaries</td><td class="px-4 py-2"><span class="math-var">Conf<sub>Board</sub></span> sets membership.</td><td class="px-4 py-2">Board registration rules, user KYC (<span class="math-var">U<sub>global</sub></span>).</td></tr>
                                    <tr><td class="px-4 py-2">2. Congruence</td><td class="px-4 py-2"><span class="math-var">Conf<sub>Board</sub></span> matches local needs.</td><td class="px-4 py-2"><span class="math-var">F<sub>registry</sub></span> offers adaptable features.</td></tr>
                                    <tr><td class="px-4 py-2">3. Collective-Choice</td><td class="px-4 py-2">Members modify <span class="math-var">Conf<sub>Board</sub></span>.</td><td class="px-4 py-2">Boards participate in Forge governance.</td></tr>
                                    <tr><td class="px-4 py-2">4. Monitoring</td><td class="px-4 py-2">Quest verification (<span class="math-var">verification<sub>t</sub></span>), <span class="math-var">Stats<sub>Board</sub></span>.</td><td class="px-4 py-2">Forge monitors platform health.</td></tr>
                                    <tr><td class="px-4 py-2">5. Graduated Sanctions</td><td class="px-4 py-2"><span class="math-var">Conf<sub>Board</sub></span> defines local responses.</td><td class="px-4 py-2">Forge sanctions for Boards violating principles.</td></tr>
                                    <tr><td class="px-4 py-2">6. Conflict Resolution</td><td class="px-4 py-2">Local dispute mechanisms.</td><td class="px-4 py-2">Forge Council as appellate layer.</td></tr>
                                    <tr><td class="px-4 py-2">7. Right to Organize</td><td class="px-4 py-2">Forge respects Board autonomy.</td><td class="px-4 py-2">Forge charter guarantees Board autonomy.</td></tr>
                                    <tr><td class="px-4 py-2">8. Nested Enterprises</td><td class="px-4 py-2">Boards are local units in Forge.</td><td class="px-4 py-2">Forge is encompassing enterprise.</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="incentives-economy" class="content-section space-y-6">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Incentive Design and Economic Modeling</h2>
                <p class="text-lg leading-relaxed">The incentive system (<span class="math-var">incentive<sub>t</sub></span>) and "Experience" points are crucial for fostering genuine contributions and positive-sum collaboration. This section details how the model aims to achieve this while preventing gamification abuse, drawing from game theory and tokenomics.</p>

                 <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Crafting Positive-Sum Incentives (<span class="math-var">incentive<sub>t</sub></span>)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>Incentives must align with true effort and impact. <span class="math-var">incentive<sub>t</sub></span> should be a multi-factor function incorporating:</p>
                        <ul class="list-disc list-inside space-y-1 my-2">
                            <li>Effort and Complexity (<span class="math-var">C<sub>q</sub></span>)</li>
                            <li>Quality and Impact (from <span class="math-var">verification<sub>t</sub></span>, <span class="math-var">V<sub>q</sub></span>)</li>
                            <li>Collaborative Behavior (<span class="math-var">E<sub>p</sub></span>)</li>
                            <li>Community Impact Contribution (<span class="math-var">I<sub>c</sub></span>)</li>
                            <li>Sybil Resistance</li>
                        </ul>
                        <p>A potential formulation: <span class="math-var">Reward<sub>q</sub> = f(C<sub>q</sub>, V<sub>q</sub>, E<sub>p</sub>, I<sub>c</sub>)</span>. The specific function <span class="math-var">f</span> needs careful design.</p>
                        <p class="mt-2">Mechanism design principles help prevent gamification abuse (e.g., optimizing for rewards over genuine contribution). Models like InfoRM (filtering irrelevant reward signals) can be adapted.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Modeling Emergent "Experience" as a Currency
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>"Experience" points, earned through contributions, can fund new Quests or boost existing ones, creating an internal economy. Tokenomics principles guide its design:</p>
                        <ul class="list-disc list-inside space-y-1 my-2">
                            <li><strong>Issuance (Minting):</strong> Linked to <span class="math-var">incentive<sub>t</sub></span> for verified, impactful contributions.</li>
                            <li><strong>Sinks (Burning/Spending):</strong> Funding/boosting Quests, Forge services, governance staking, dispute fees.</li>
                            <li><strong>Value:</strong> Determined by utility and scarcity. Must avoid "inflation."</li>
                            <li><strong>Interoperability:</strong> Challenging for cross-Board <span class="math-var">X<sub>global</sub></span> collaborations if Experience economies differ. The Forge might set standards or facilitate exchange.</li>
                        </ul>
                        <p class="mt-2">The system should primarily facilitate civic action, not create a speculative market. Staking Experience for governance links reputation to decision-making.</p>
                    </div>
                </div>
            </section>

            <section id="quest-lifecycle-impact" class="content-section space-y-6">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Quest Lifecycle and Impact Measurement</h2>
                <p class="text-lg leading-relaxed">Quests (<span class="math-var">t</span>) follow a "Create &rarr; Claim &rarr; Verify &rarr; Log" lifecycle. This section details the formalization of this process, including dual-attestation (<span class="math-var">verification<sub>t</sub></span>), and how "positive community impact" (the North-Star KPI) is measured beyond simple completion counts.</p>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Quest Lifecycle (<span class="math-var">t</span>) & Dual Attestation (<span class="math-var">verification<sub>t</sub></span>)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>State machines or Petri nets can model the Quest lifecycle. Key states include:</p>
                        <div id="questLifecycleDiagram" class="quest-lifecycle-grid my-4">
                        </div>
                        <div id="questStateDescription" class="text-sm">Click on a Quest state above to see its description.</div>
                        <p class="mt-3">Dual-attestation (<span class="math-var">verification<sub>t</sub></span>) involves performer (<span class="math-var">U<sub>P</sub></span>) and verifier (<span class="math-var">U<sub>V</sub></span>) consensus. Disagreements lead to a DISPUTED state. An "EXCEPTIONAL" completion state offers higher rewards and requires objective criteria (e.g., predefined metrics, rubric-based assessment). A Bayesian approach could model <span class="math-var">verification<sub>t</sub></span>, combining evidence and reputations.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Measuring "Positive Community Impacts" (<span class="math-var">Stats<sub>Board</sub></span>)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>Impact measurement goes beyond Quest counts. Board statistics (<span class="math-var">Stats<sub>Board</sub></span>) should capture:</p>
                        <ul class="list-disc list-inside space-y-1 my-2">
                            <li>Scale and Scope of Quests (participants, resources, needs addressed).</li>
                            <li>Quality and Verifiability of Outcomes.</li>
                            <li>Sustainability of Impact.</li>
                            <li>Strengthening of Community Fabric (social capital, trust, collaboration).</li>
                            <li>Value Co-creation and Positive Externalities.</li>
                        </ul>
                        <p class="mt-2">A <strong>Composite Community Impact Index (CCII)</strong> could synthesize diverse indicators (Quest rates, participation diversity, resource mobilization, self-reported impact). This supports a "Learn, Then Improve" cycle for Boards.</p>
                    </div>
                </div>
            </section>

            <section id="trust-values" class="content-section space-y-6">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Embodying Trust, Accountability, and Civic Values</h2>
                <p class="text-lg leading-relaxed">CivicForge emphasizes "Real People, Genuine Trust," anchored by KYC for global user identities (<span class="math-var">U<sub>global</sub></span>). This section explores how trust and reputation are mathematically represented and earned, how moderation and dispute resolution are formalized, and how desired civic culture is cultivated.</p>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Mathematical Representations of Trust and Reputation (<span class="math-var">Rep<sub>U</sub></span>)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>Dynamic trust models like ECT (Expectation Confirmation Trust) and DIB-RM (Dynamic Interaction-Based Reputation Model) are relevant. Reputation should be multi-faceted. A user's (<span class="math-var">U<sub>global</sub></span>) reputation vector <span class="math-var">Rep<sub>U</sub></span> could include:</p>
                        <ul class="list-disc list-inside space-y-1 my-2">
                            <li><span class="math-var">Rep<sub>completion</sub></span>: Reliability in performing Quests.</li>
                            <li><span class="math-var">Rep<sub>verification</sub></span>: Accuracy in verifying Quests.</li>
                            <li><span class="math-var">Rep<sub>creation</sub></span>: Quality of created Quests.</li>
                            <li><span class="math-var">Rep<sub>civic_virtue</sub></span>: Adherence to community values.</li>
                        </ul>
                        <p class="mt-2">Scores update dynamically: <span class="math-var">Rep<sub>new</sub> = Rep<sub>old</sub> &middot; &beta;<sup>&Delta;t</sup> + &alpha; &middot; InteractionValue</span>. Reputation can influence incentives, governance voting, role eligibility, and moderation.</p>
                    </div>
                </div>
                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Formalizing Moderation and Dispute Resolution
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>A multi-level dispute resolution process: Board-first, then Forge Council. Decentralized justice systems (e.g., Kleros) offer models.</p>
                        <h4 class="font-semibold mt-3 mb-1 text-emerald-600 dark:text-emerald-300">Dispute Resolution Flow:</h4>
                        <div class="flex flex-col items-center p-4 border border-amber-300 dark:border-amber-700 rounded-md bg-amber-50 dark:bg-neutral-800">
                            <div class="diagram-box bg-amber-100 dark:bg-amber-800 border-amber-400 dark:border-amber-600 text-amber-800 dark:text-amber-200 w-3/4">Dispute Triggered (e.g., from <span class="math-var">verification<sub>t</sub></span>)</div>
                            <div class="text-2xl my-1">↓</div>
                            <div class="diagram-box bg-emerald-100 dark:bg-emerald-700 border-emerald-300 dark:border-emerald-500 text-emerald-800 dark:text-emerald-100 w-3/4">Level 1: Board-Level Resolution (Mediation, Panel Review, Board Vote as per <span class="math-var">Conf<sub>Board</sub></span>)</div>
                            <div class="text-2xl my-1">↓ <span class="text-sm">(If unresolved/appealed)</span></div>
                            <div class="diagram-box bg-red-100 dark:bg-red-900 border-red-300 dark:border-red-700 text-red-800 dark:text-red-200 w-3/4">Level 2: Forge Council Appeal (Kleros-like: Arbiter Selection, Evidence Review, Voting, Ruling)</div>
                            <p class="mt-2 text-sm text-neutral-600 dark:text-neutral-400">Transparency and fairness are key, with processes logged.</p>
                        </div>
                    </div>
                </div>
                 <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Cultivating Desired Culture (Civic Value Metrics - CVMs)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>The model should actively cultivate accountability, kindness, pluralism. Computational models of social norms (e.g., CSSMs) can be adapted. This involves:</p>
                        <ol class="list-decimal list-inside space-y-1 my-2">
                            <li>Identifying key civic values and associated behaviors (e.g., kindness = offering help).</li>
                            <li>Defining "Civic Value Metrics" (CVMs) for these behaviors (e.g., <span class="math-var">CVM<sub>helpfulness</sub></span>).</li>
                            <li>Measuring/attesting CVM-related behaviors (user flags, AI-assist, lightweight attestations).</li>
                            <li>Integrating CVMs into platform economy (small Experience rewards, <span class="math-var">Rep<sub>civic_virtue</sub></span> boosts).</li>
                        </ol>
                        <p class="mt-2">Human-Centered AI (HCAI) principles must guide any AI moderation to ensure fairness.</p>
                    </div>
                </div>
            </section>

            <section id="risk-mitigation" class="content-section space-y-6">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Preventing Negative Emergence and Upholding Purpose</h2>
                <p class="text-lg leading-relaxed">CivicForge must avoid issues like spam, collusion, and trust erosion. This section discusses "guardrails" within the mathematical framework, drawing from Complex Adaptive Systems (CAS) theory and lessons from past platform failures.</p>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Designing "Guardrails"
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>Guardrails are structural (making abuse costly) and responsive (detecting/penalizing harm).</p>
                        <ul class="list-disc list-inside space-y-2 my-2">
                            <li><strong>Spam Quests:</strong> Mitigate with creation costs (Experience/reputation), reputation thresholds, community flagging/voting, AI-assisted detection.</li>
                            <li><strong>Collusion:</strong> Mitigate with diverse/random verifier selection, transparency, interaction limits, network analysis for detection, verifier incentives aligned with accuracy.</li>
                            <li><strong>Hostile Forks/Rogue Boards:</strong> Mitigate with strong Forge governance, Board reputation scores, clear compliance rules.</li>
                            <li><strong>Erosion of Trust:</strong> Mitigate with robust trust mechanisms (KYC, transparency, fair dispute resolution, dynamic reputation, CVMs).</li>
                        </ul>
                        <p class="mt-2">Mechanism design is key to discourage gamification abuse. Proof-of-effort/impact components of <span class="math-var">incentive<sub>t</sub></span> must be robust.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Learning from Past Platform Failures (Table 2 Summary)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>To avoid "action theatre" (low-effort Quests for points) and other pitfalls:</p>
                        <div class="table-container">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-neutral-700">
                                <thead class="bg-amber-100 dark:bg-neutral-700">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-amber-600 dark:text-amber-300 uppercase tracking-wider">Failure Mode</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-amber-600 dark:text-amber-300 uppercase tracking-wider">Mitigation Strategy in Model</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white dark:bg-neutral-800 divide-y divide-gray-200 dark:divide-neutral-600 text-sm">
                                    <tr><td class="px-4 py-2">Quest Spam / Trivialization</td><td class="px-4 py-2">Cost to create; reputation thresholds; community voting; <span class="math-var">incentive<sub>t</sub></span> weighted by impact.</td></tr>
                                    <tr><td class="px-4 py-2">Verifier Collusion</td><td class="px-4 py-2">Random/reputation verifiers; transparency; penalties for overturned verifications.</td></tr>
                                    <tr><td class="px-4 py-2">Gamification Eroding Intrinsic Motivation</td><td class="px-4 py-2">Balance <span class="math-var">incentive<sub>t</sub></span> with non-monetary recognition; CVMs for civic behaviors.</td></tr>
                                    <tr><td class="px-4 py-2">Board Capture / Echo Chambers</td><td class="px-4 py-2">Forge inclusivity guidelines; protect minority opinions in <span class="math-var">Conf<sub>Board</sub></span>; promote <span class="math-var">X<sub>global</sub></span> Quests.</td></tr>
                                    <tr><td class="px-4 py-2">Erosion of Trust (Unfairness)</td><td class="px-4 py-2">Transparent, auditable processes for incentives, verification, disputes; Kleros-like arbitration.</td></tr>
                                    <tr><td class="px-4 py-2">Forge Centralization</td><td class="px-4 py-2">Democratic Forge voting (e.g., QV); Board autonomy protections; transparent RFC process.</td></tr>
                                </tbody>
                            </table>
                        </div>
                         <p class="mt-3">Key strategies include: aligning rewards with genuine impact, balancing extrinsic/intrinsic motivation, fostering a "Learn, Then Improve" culture for the platform itself, promoting information diversity, and robust moderation.</p>
                    </div>
                </div>
            </section>

            <section id="frameworks-conclusion" class="content-section space-y-6">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Recommended Frameworks and Conclusion</h2>
                <p class="text-lg leading-relaxed">A multi-paradigm approach is recommended, using different formalisms for distinct aspects of CivicForge. This section summarizes potential frameworks and concludes with the vision for an evolving, ethical foundation.</p>

                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Comparative Analysis of Frameworks (Table 3 Summary)
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <p>Key frameworks and their suitability:</p>
                        <div class="table-container">
                             <table class="min-w-full divide-y divide-gray-200 dark:divide-neutral-700">
                                <thead class="bg-amber-100 dark:bg-neutral-700">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-amber-600 dark:text-amber-300 uppercase tracking-wider">Framework</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-amber-600 dark:text-amber-300 uppercase tracking-wider">Primary Application in CivicForge</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white dark:bg-neutral-800 divide-y divide-gray-200 dark:divide-neutral-600 text-sm">
                                    <tr><td class="px-4 py-2">Game Theory/Mechanism Design</td><td class="px-4 py-2">Incentives, verification, dispute resolution.</td></tr>
                                    <tr><td class="px-4 py-2">State Machines/Petri Nets</td><td class="px-4 py-2">Quest lifecycle.</td></tr>
                                    <tr><td class="px-4 py-2">Agent-Based Modeling (ABM)</td><td class="px-4 py-2">Simulating emergent social dynamics, norm formation.</td></tr>
                                    <tr><td class="px-4 py-2">Network Analysis</td><td class="px-4 py-2">Board structure, <span class="math-var">X<sub>global</sub></span> collaborations, social capital.</td></tr>
                                    <tr><td class="px-4 py-2">Complex Adaptive Systems (CAS)</td><td class="px-4 py-2">Overall ecosystem understanding, resilience design.</td></tr>
                                    <tr><td class="px-4 py-2">Federated Systems Architectures</td><td class="px-4 py-2">Forge-Board interaction, data sharing, interoperability.</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="mt-2">A hybrid model is envisioned, integrating these frameworks.</p>
                    </div>
                </div>
                <div class="accordion-item bg-white dark:bg-neutral-800 rounded-lg shadow transition-colors duration-300">
                    <button class="accordion-button w-full text-left p-4 font-semibold text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-neutral-700 transition-colors flex justify-between items-center">
                        Specific Modeling Recommendations
                        <span class="arrow-icon text-xl">▼</span>
                    </button>
                    <div class="accordion-content p-4 border-t border-gray-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300">
                        <ul class="list-disc list-inside space-y-2 my-2">
                            <li><strong>Dual-Attestation (<span class="math-var">verification<sub>t</sub></span>):</strong> Model as a Bayesian decision process or coordination game. Output signals quality/effort for <span class="math-var">incentive<sub>t</sub></span>.</li>
                            <li><strong>Forge/Board Hierarchy:</strong> Boards as autonomous agents (CAS framework) governed by Ostrom's principles. Forge sets meta-rules, <span class="math-var">F<sub>registry</sub></span> evolves via RFC-like process with QV or liquid democracy. Interactions via federated architectures.</li>
                            <li><strong>Emergent "Experience" Points:</strong> Model as internal currency using token economy design principles (value proposition, issuance, sinks, utility). ABM can simulate emergence.</li>
                        </ul>
                        <p class="mt-2">Overlooked principles needing emphasis: Proof of non-trivial effort/impact, robustness of Experience economy, strength of Forge governance for coherence, and Human-Centered AI (HCAI).</p>
                    </div>
                </div>
                 <div class="bg-white dark:bg-neutral-800 p-6 rounded-lg shadow transition-colors duration-300">
                    <h3 class="text-xl font-semibold text-emerald-700 dark:text-emerald-400 mb-3">Conclusion: Towards a Robust and Ethical Foundation</h3>
                    <p class="text-neutral-700 dark:text-neutral-300">The CivicForge model aims to be a codification of an evolving social contract. An iterative approach to its development, deployment, and refinement is essential, guided by data (<span class="math-var">Stats<sub>Board</sub></span>, feedback, CVMs) and HCAI principles. The goal is a robust, ethical, and effective system for communities to "do something worth doing."</p>
                </div>
            </section>

            <section id="key-terms" class="content-section space-y-4">
                <h2 class="text-3xl font-semibold text-amber-700 dark:text-amber-400 border-b-2 border-amber-600 dark:border-amber-500 pb-2">Key Terms & Notations</h2>
                <p class="text-lg leading-relaxed">A quick reference for some of the specialized terms and mathematical notations used in the CivicForge model review.</p>
                <div id="keyTermsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                </div>
            </section>
        </main>
    </div>

    <button id="theme-toggle-button" type="button" class="text-amber-700 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-neutral-700 focus:outline-none focus:ring-4 focus:ring-amber-300 dark:focus:ring-amber-800 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center">
        <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
        <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
        <span class="sr-only">Toggle theme</span>
    </button>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            
            function updateActiveSectionBasedOnScroll() {
                let currentSectionId = 'introduction'; 
                let minDistance = Infinity;

                contentSections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const distanceToTop = Math.abs(rect.top);
                    
                    if (rect.top <= 150 && rect.bottom >=50) { // Section is in view
                        if (distanceToTop < minDistance) {
                            minDistance = distanceToTop;
                            currentSectionId = section.id;
                        }
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + currentSectionId) {
                        link.classList.add('active');
                    }
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
            
            contentSections.forEach(section => section.classList.add('active'));
            if (navLinks.length > 0 && document.getElementById('introduction')) navLinks[0].classList.add('active');


            window.addEventListener('scroll', updateActiveSectionBasedOnScroll);
            updateActiveSectionBasedOnScroll(); 


            const accordionButtons = document.querySelectorAll('.accordion-button');
            accordionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const currentlyOpen = document.querySelector('.accordion-button.open');
                    if (currentlyOpen && currentlyOpen !== button) {
                        currentlyOpen.classList.remove('open');
                        currentlyOpen.querySelector('.arrow-icon').textContent = '▼';
                    }

                    button.classList.toggle('open');
                    const arrowIcon = button.querySelector('.arrow-icon');
                    if (button.classList.contains('open')) {
                        arrowIcon.textContent = '▲';
                    } else {
                        arrowIcon.textContent = '▼';
                    }
                });
            });

            const questLifecycleDiagram = document.getElementById('questLifecycleDiagram');
            const questStateDescription = document.getElementById('questStateDescription');
            const questStates = [
                { id: "S0", name: "DRAFT", description: "Quest being defined by creator." },
                { id: "S1", name: "OPEN", description: "Quest created, KYC-verified creator, potentially funded by Experience, awaiting claims." },
                { id: "S2", name: "CLAIMED", description: "A user Uₚ has claimed the Quest." },
                { id: "S3", name: "WORK SUBMITTED", description: "User Uₚ has submitted work for verification." },
                { id: "S4", name: "PENDING DUAL ATTESTATION", description: "Awaiting attestations from Uₚ and designated verifier(s) Uᵥ." },
                { id: "S5", name: "ATTESTED NORMAL", description: "Both Uₚ and Uᵥ agree on standard completion." },
                { id: "S6", name: "ATTESTED EXCEPTIONAL", description: "Both Uₚ and Uᵥ agree on exceptional completion, or criteria met." },
                { id: "S7", name: "DISPUTED", description: "Disagreement between Uₚ and Uᵥ, or flagged by community." },
                { id: "S8", name: "RESOLVED COMPLETED", description: "Dispute resolved in favor of completion (normal or exceptional)." },
                { id: "S9", name: "RESOLVED FAILED", description: "Dispute resolved, Quest not completed satisfactorily." },
                { id: "S10", name: "LOGGED COMPLETED", description: "Quest successfully completed and recorded; triggers incentiveₜ." },
                { id: "S11", name: "LOGGED FAILED", description: "Quest not completed or failed verification/dispute; recorded." },
                { id: "S12", name: "CANCELLED", description: "Quest cancelled before completion." }
            ];

            if (questLifecycleDiagram) {
                questStates.forEach(state => {
                    const node = document.createElement('div');
                    node.classList.add('quest-state-node');
                    node.textContent = `${state.id}: ${state.name}`;
                    node.dataset.description = state.description;
                    node.addEventListener('click', () => {
                        if(questStateDescription) questStateDescription.textContent = state.description;
                        document.querySelectorAll('.quest-state-node').forEach(n => n.classList.remove('active-node'));
                        node.classList.add('active-node');
                    });
                    questLifecycleDiagram.appendChild(node);
                });
            }
             if (questStateDescription && questStates.length > 0) {
                questStateDescription.textContent = "Click on a Quest state above to see its description.";
            }

            const keyTermsContainer = document.getElementById('keyTermsContainer');
            const keyTerms = [
                { term: "U<sub>global</sub>", definition: "Global user identity, typically KYC-verified at the Forge level." },
                { term: "Conf<sub>Board</sub>", definition: "Board-specific configurations, including local rules, themes, and incentive structures." },
                { term: "F<sub>registry</sub>", definition: "Forge-level registry of features, themes, and standards available to Boards." },
                { term: "X<sub>global</sub>", definition: "Cross-Board interactions and collaborations managed or facilitated by the Forge." },
                { term: "type<sub>x</sub>", definition: "Specific types of cross-Board interactions (e.g., resource sharing, joint projects)." },
                { term: "incentive<sub>t</sub>", definition: "The incentive system or function that determines rewards for contributions." },
                { term: "Reward<sub>q</sub>", definition: "The reward calculated for a specific Quest q." },
                { term: "C<sub>q</sub>, V<sub>q</sub>, E<sub>p</sub>, I<sub>c</sub>", definition: "Components of the reward function: Complexity, Verification outcome, Peer endorsements, Community impact." },
                { term: "t", definition: "A Quest or task within the CivicForge platform." },
                { term: "verification<sub>t</sub>", definition: "The process of verifying Quest completion, often involving dual attestation." },
                { term: "Stats<sub>Board</sub>", definition: "Aggregated statistics and data related to a Board's activity and impact." },
                { term: "CCII", definition: "Composite Community Impact Index, a synthesized measure of a Board's positive impact." },
                { term: "Rep<sub>U</sub>", definition: "A user's reputation vector, potentially multi-faceted (e.g., completion, verification, civic virtue)." },
                { term: "CVMs", definition: "Civic Value Metrics, quantifiable measures of behaviors aligned with platform values." },
                { term: "DAO", definition: "Decentralized Autonomous Organization, a model for community-led governance." },
                { term: "RFC", definition: "Request for Comments, a process for proposing and evolving standards." },
                { term: "KYC", definition: "Know Your Customer, an identity verification process." },
                { term: "HCAI", definition: "Human-Centered AI, an AI design philosophy emphasizing human control and empowerment." }
            ];

            if (keyTermsContainer) {
                keyTerms.forEach(item => {
                    const termCard = document.createElement('div');
                    termCard.classList.add('bg-white', 'dark:bg-neutral-800', 'p-4', 'rounded-lg', 'shadow', 'transition-colors', 'duration-300');
                    termCard.innerHTML = `<h4 class="font-semibold text-emerald-700 dark:text-emerald-400 text-lg"><span class="math-var">${item.term}</span></h4><p class="text-sm text-neutral-600 dark:text-neutral-400 mt-1">${item.definition}</p>`;
                    keyTermsContainer.appendChild(termCard);
                });
            }

            const themeToggleButton = document.getElementById('theme-toggle-button');
            const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

            function applyTheme(isDark) {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                    if(themeToggleDarkIcon) themeToggleDarkIcon.classList.remove('hidden');
                    if(themeToggleLightIcon) themeToggleLightIcon.classList.add('hidden');
                    localStorage.setItem('color-theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    if(themeToggleDarkIcon) themeToggleDarkIcon.classList.add('hidden');
                    if(themeToggleLightIcon) themeToggleLightIcon.classList.remove('hidden');
                    localStorage.setItem('color-theme', 'light');
                }
            }
            
            const preferredTheme = localStorage.getItem('color-theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (preferredTheme === 'dark' || (!preferredTheme && systemPrefersDark)) {
                applyTheme(true);
            } else {
                applyTheme(false);
            }

            if(themeToggleButton) {
                themeToggleButton.addEventListener('click', function() {
                    const isDark = document.documentElement.classList.contains('dark');
                    applyTheme(!isDark);
                });
            }
        });
    </script>
</body>
</html>
